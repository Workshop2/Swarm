<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<script type="text/javascript" src="js/two.js"></script>
</head> 
<body>
	<div id="canvas" style="background: black"></div>
	<script type="text/javascript">
        var elem = document.getElementById('canvas');
        var playArea = {
            width: 1200,
            height: 480
        };

        var two = new Two(playArea).appendTo(elem);
    	two.play();

		var target = CreateDot(two, playArea, 'red');
		target = CreateTarget(target, playArea);

    	var dots = [];
    	for(var i = 0; i < 100; i ++){
    		var dot = CreateDot(two, playArea);
    		var bee = CreateBee(dot);
    		dots.push(bee);
    	}

    	two.bind('update', function () {
    		target.update();

			for(var i = 0; i < dots.length; i++) {
				var pos = dots[i].update(target);		
			}
    	});


    	function CreateDot(two, playArea, colour) {
			var x = Random(1, 100),
				y = Random(1, 100),
				size = 2;

	    	var dot = two.makeCircle(x, y, size);
	    	dot.fill = colour || 'yellow';

	    	return dot;
    	}

    	function CreateBee(dot) {
    		var pos = dot.translation;

    		return {
				dot: dot,
				update: function(targetDot) {
					var target = targetDot.translation;

					if(pos.x < target.x)
						pos.x++;
					if(pos.x > target.x)
						pos.x--;

					if(pos.y < target.y)
						pos.y++;
					if(pos.y > target.y)
						pos.y--;		
				}
    		};
    	}

    	function CreateTarget(dot, playArea) {
			var degrees = 0,
				pos = dot.translation;

    		return {
				translation: dot.translation,
				update: function(){
					degrees++;

					// move target in a lovely circle (Thanks James)
					var radians = (degrees * Math.PI / 180); // convert degrees to radians
					pos.x = playArea.width  / 2 + (Math.cos(radians) * 100);
					pos.y = playArea.height / 2 + (Math.sin(radians) * 100);
				}
    		};
    	}

    	function Random(min, max) {
    		return Math.floor((Math.random() * max) + min);
    	}
    </script>
</body>
</html>